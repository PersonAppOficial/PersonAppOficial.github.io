<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>PersonAPP</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
:root{ --bg:#2b2ee6; --text:#f4f6f8; --panel:#202225; --panel2:#151618; --accent:#4CAF50; --muted:#b9c0c7; --warn:#ffd166; }
*{box-sizing:border-box}
body{margin:0; background:var(--bg); color:var(--text); font-family:'Montserrat','Segoe UI',Arial,sans-serif}
a{color:inherit; text-decoration:none}
.wrap{max-width:1200px; margin:0 auto; padding:20px}
header{display:flex; align-items:center; justify-content:center; text-align:center; padding:40px 10px 10px}
h1{font-size:2.6rem; margin:0 0 8px; text-shadow:0 2px 16px rgba(18,255,65,.7)}
p.lead{margin:0; opacity:.9}

/* Grilla Apps */
.grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:22px; margin:32px 0 48px}
.card{background:linear-gradient(135deg,var(--panel2) 60%,var(--panel) 100%); border:1px solid rgba(255,255,255,.06);
border-radius:16px; padding:18px; box-shadow:0 2px 16px rgba(0,0,0,.25); transition:transform .2s, box-shadow .2s;}
.card:hover{transform:translateY(-6px); box-shadow:0 10px 24px rgba(0,0,0,.35)}
.card img.logo{width:64px; height:64px; object-fit:contain; background:#111; border-radius:12px; box-shadow:0 1px 8px rgba(0,0,0,.3)}
.card h3{margin:12px 0 8px; font-size:1.15rem}
.card p{margin:0 0 12px; color:#dfe5ea}
.stores{display:flex; gap:8px; flex-wrap:wrap}
.btn{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:none; cursor:pointer;
background:linear-gradient(90deg,#232526 0%, var(--accent) 100%); color:#fff; font-weight:700; font-size:.9rem}

/* Foro */
#foro{background:rgba(0,0,0,.16); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px; margin:24px 0 80px}
#foro h2{margin:0 0 6px}
.hint{color:var(--muted); margin:0 0 16px}
#postForm{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:16px}
#postForm .full{grid-column:1/-1}
input, select, textarea{width:100%; border:1px solid rgba(255,255,255,.15); background:#141516; color:#fff;
border-radius:10px; padding:10px 12px; font-family:inherit; font-size:1rem}
textarea{min-height:100px; resize:vertical}
.actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.progress{height:8px; background:#111; border-radius:6px; overflow:hidden; width:220px; display:none}
.bar{height:100%; width:0%; background:var(--accent); transition:width .1s linear}
.feed{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:14px}
.post{background:linear-gradient(135deg,#1a1a1a 60%, #232323 100%); border:1px solid rgba(255,255,255,.08);
border-radius:12px; padding:14px; box-shadow:0 1px 10px rgba(0,0,0,.25)}
.meta{font-size:.85rem; color:#c7ced6}
.stars{color:var(--warn)}
.media{margin-top:8px}
.media img, .media video{width:100%; border-radius:10px; display:block}
.comments{margin-top:10px; border-top:1px solid rgba(255,255,255,.08); padding-top:10px}
.comment{font-size:.95rem; margin:6px 0}
.comment .by{color:#cbd2d9; font-size:.85rem}
.comment-form{display:flex; gap:6px; margin-top:8px}
.comment-form input{flex:1}
.comment-form button{white-space:nowrap}

/* Juego (Gomoso) */
#juego{margin:50px 0 90px; background:rgba(0,0,0,.14); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px}
#gameWrap{display:flex; flex-direction:column; align-items:center; gap:8px}
#arena{background:#0f0f12; border:2px solid #2b2b2b; border-radius:8px; max-width:100%; height:auto}
.hud{display:flex; gap:14px; flex-wrap:wrap; align-items:center; justify-content:center}

/* Fijos + mano */
.brand{position:fixed; left:16px; bottom:16px; font-weight:800; letter-spacing:1px; opacity:.9}
.contact{position:fixed; right:16px; bottom:16px; opacity:.9; background:rgba(0,0,0,.3); padding:6px 12px; border-radius:8px}
.emoji-wave{position:fixed; bottom:40px; right:40px; font-size:90px; line-height:1; z-index:9999;
animation:wave 1.6s ease-in-out infinite; user-select:none; pointer-events:none; filter:drop-shadow(0 3px 6px rgba(0,0,0,.5))}
@keyframes wave{0%,100%{transform:rotate(0deg)} 15%{transform:rotate(20deg)} 30%{transform:rotate(-10deg)} 45%{transform:rotate(12deg)} 60%{transform:rotate(-6deg)} 75%{transform:rotate(4deg)}}
</style>
</head>
<body>
<div class="wrap">
<header>
<div>
<h1>APP para emprendedores</h1>
<p class="lead">Foro global con im√°genes/videos en tiempo real y minijuego ‚ÄúGomoso Equilibrado‚Äù.</p>
</div>
</header>

<!-- Apps -->
<section id="apps" class="grid" aria-label="apps">
<article class="card">
<img class="logo" src="Img/logo.busho.png" alt="BUSHO" />
<h3>BUSHO</h3>
<p>Arriendo flexible de espacios comerciales.</p>
<div class="stores">
<a class="btn" href="https://busho.cl/" target="_blank" rel="noopener noreferrer">Visitar</a>
<a class="btn" href="https://apps.apple.com/cl/app/busho/id1665748711" target="_blank" rel="noopener noreferrer">iOS</a>
<a class="btn" href="https://play.google.com/store/apps/details?id=app.busho.cl" target="_blank" rel="noopener noreferrer">Android</a>
</div>
</article>

<article class="card">
<img class="logo" src="Img/logo.canva.png" alt="Canva" />
<h3>Canva</h3>
<p>Dise√±os f√°ciles para redes y marca.</p>
<div class="stores"><a class="btn" href="https://www.canva.com/" target="_blank" rel="noopener noreferrer">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.shopify3.png" alt="Shopify" />
<h3>Shopify</h3>
<p>Tu tienda online en minutos.</p>
<div class="stores"><a class="btn" href="https://www.shopify.com/" target="_blank" rel="noopener noreferrer">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.zoom.png" alt="Zoom" />
<h3>Zoom</h3>
<p>Reuniones profesionales.</p>
<div class="stores"><a class="btn" href="https://zoom.us/" target="_blank" rel="noopener noreferrer">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.mercadopago.png" alt="Mercado Pago" />
<h3>Mercado Pago</h3>
<p>Cobra con tarjeta desde el celular.</p>
<div class="stores"><a class="btn" href="https://www.mercadopago.cl/" target="_blank" rel="noopener noreferrer">Visitar</a></div>
</article>
</section>

<!-- Foro global -->
<section id="foro">
<h2>Foro & Rese√±as</h2>
<p class="hint">Todos pueden publicar rese√±as y comentar. Se suben im√°genes o videos con barra de progreso.</p>

<form id="postForm">
<div>
<label>App</label>
<select id="fApp" required>
<option value="BUSHO">BUSHO</option><option value="Canva">Canva</option>
<option value="Shopify">Shopify</option><option value="Zoom">Zoom</option>
<option value="Mercado Pago">Mercado Pago</option>
</select>
</div>
<div><label>Tu nombre</label><input id="fName" type="text" placeholder="Ej: Ra√∫l" required maxlength="40"/></div>
<div>
<label>Calificaci√≥n</label>
<select id="fRating" required>
<option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5)</option><option value="4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (4)</option>
<option value="3">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (3)</option><option value="2">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ (2)</option>
<option value="1">‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ (1)</option>
</select>
</div>
<div class="full"><label>Rese√±a</label><textarea id="fText" placeholder="¬øQu√© te gust√≥? ¬øQu√© mejorar√≠as?" required maxlength="800"></textarea></div>
<div class="full">
<label>Imagen o video (opcional)</label>
<input id="fFile" type="file" accept="image/*,video/*" />
<div class="progress" id="progress"><div class="bar" id="bar"></div></div>
</div>
<div class="full actions">
<button class="btn" type="submit" id="sendBtn">Publicar</button>
<span id="status" class="hint"></span>
</div>
</form>

<div id="feed" class="feed"></div>
</section>

<!-- Minijuego: Gomoso Equilibrado (alternativa segura) -->
<section id="juego">
<h2>Minijuego: ¬°Mant√©n a Gomoso en forma!</h2>
<p class="hint">Mueve la mano üëã con flechas/WASD para empujar a Gomoso. Come üçî para crecer y üçé para adelgazar. ¬°Mant√©n su tama√±o en la zona saludable!</p>
<div id="gameWrap">
<canvas id="arena" width="800" height="480"></canvas>
<div class="hud">
<button class="btn" id="restart">Reiniciar</button>
<div>Nivel: <strong id="lvl">1</strong></div>
<div>Puntos: <strong id="score">0</strong></div>
<div>Tama√±o: <strong id="sizeRead">‚Äî</strong></div>
</div>
</div>
</section>
</div>

<div class="brand">PersonAPP</div>
<div class="contact">contacto: personappoficial@gmail.com</div>
<div class="emoji-wave" aria-hidden="true">üëã</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
<script>
/* üîê Pega tus credenciales reales (Proyecto con Firestore + Storage) */
const firebaseConfig = {
apiKey: "TU_API_KEY",
authDomain: "TU_AUTH_DOMAIN",
projectId: "TU_PROJECT_ID",
storageBucket: "TU_STORAGE_BUCKET",
messagingSenderId: "TU_SENDER_ID",
appId: "TU_APP_ID"
};
if(!firebaseConfig.apiKey){ alert("Falta configurar Firebase: edita firebaseConfig."); }
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();
</script>

<script>
/************ Foro en tiempo real con subida de imagen/video (con progreso) ************/
const allowedApps = ["BUSHO","Canva","Shopify","Zoom","Mercado Pago"];
const $ = s => document.querySelector(s);
const feed = $("#feed"), statusEl=$("#status"), bar=$("#bar"), prog=$("#progress");

const stars = n => "‚òÖ".repeat(+n||0) + "‚òÜ".repeat(5-(+n||0));
const escapeHTML = s => (s||"").replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]));

async function uploadMedia(file){
if(!file) return { url:"", type:"" };
const MAX_MB = 25;
if(file.size > MAX_MB*1024*1024) throw new Error("Archivo muy grande (m√°x " + MAX_MB + " MB).");
const safe = file.name.replace(/[^a-z0-9.\-_]/gi,"_");
const path = `media/${Date.now()}_${safe}`;
const ref = storage.ref().child(path);
prog.style.display="block";
return await new Promise((resolve, reject)=>{
const t = ref.put(file, {contentType:file.type});
t.on('state_changed', snap=>{
const pct = Math.round((snap.bytesTransferred/snap.totalBytes)*100);
bar.style.width = pct + "%";
}, reject, async ()=>{
const url = await ref.getDownloadURL();
bar.style.width = "0%"; prog.style.display="none";
resolve({ url, type: file.type.startsWith("video/") ? "video" : "image" });
});
});
}

function renderComment(el, c){
const t = (c.time?.toDate ? c.time.toDate() : new Date());
const div=document.createElement("div"); div.className="comment";
div.innerHTML = `<div>${escapeHTML(c.text||"")}</div><div class="by">${escapeHTML(c.name||"Invitado")} ¬∑ ${t.toLocaleString()}</div>`;
el.appendChild(div);
}

function renderPost(doc){
const p = doc.data();
const t = p.time?.toDate ? p.time.toDate() : new Date();
const wrap = document.createElement("article");
wrap.className = "post";
wrap.id = `post-${doc.id}`;
wrap.innerHTML = `
<div class="meta"><strong>${escapeHTML(p.app||"")}</strong> ¬∑ ${escapeHTML(p.name||"")} <span class="stars">${stars(p.rating||0)}</span></div>
<div>${escapeHTML(p.text||"")}</div>
<div class="media">
${p.mediaUrl ? (p.mediaType==="video" ? `<video controls src="${escapeHTML(p.mediaUrl)}"></video>` : `<img src="${escapeHTML(p.mediaUrl)}" alt="media">`) : ""}
</div>
<div class="meta">${t.toLocaleString()}</div>
<div class="comments" id="c-${doc.id}">
<div class="comment-form">
<input type="text" id="cn-${doc.id}" placeholder="Escribe un comentario..." maxlength="300"/>
<button class="btn" data-post="${doc.id}">Comentar</button>
</div>
<div id="cl-${doc.id}"></div>
</div>
`;
// Comentarios en tiempo real
db.collection("posts").doc(doc.id).collection("comments").orderBy("time","asc").onSnapshot(s=>{
const list = wrap.querySelector(`#cl-${doc.id}`);
list.innerHTML = "";
s.forEach(c=> renderComment(list, c.data()));
});
// Enviar comentario
wrap.querySelector(`button[data-post="${doc.id}"]`).addEventListener("click", async ()=>{
const input = wrap.querySelector(`#cn-${doc.id}`);
const text = input.value.trim(); if(!text) return;
await db.collection("posts").doc(doc.id).collection("comments").add({
text, name:"Invitado", time: firebase.firestore.FieldValue.serverTimestamp()
});
input.value="";
});
return wrap;
}

// Feed en tiempo real
db.collection("posts").orderBy("time","desc").limit(50).onSnapshot(snap=>{
feed.innerHTML="";
const frag=document.createDocumentFragment();
snap.forEach(doc=> frag.appendChild(renderPost(doc)));
feed.appendChild(frag);
});

// Publicar post
document.getElementById("postForm").addEventListener("submit", async e=>{
e.preventDefault();
const btn = document.getElementById("sendBtn"); btn.disabled = true;
statusEl.textContent = "Subiendo...";
try{
const app = document.getElementById("fApp").value;
const name = document.getElementById("fName").value.trim();
const rating = +document.getElementById("fRating").value;
const text = document.getElementById("fText").value.trim();
const file = document.getElementById("fFile").files[0] || null;
if(!allowedApps.includes(app)) throw new Error("App no permitida.");
if(!name || !text) throw new Error("Completa nombre y rese√±a.");

let mediaUrl="", mediaType="";
if(file){ ({url:mediaUrl, type:mediaType} = await uploadMedia(file)); }

await db.collection("posts").add({
app, name:name.slice(0,40), rating, text:text.slice(0,800),
mediaUrl, mediaType, time: firebase.firestore.FieldValue.serverTimestamp()
});

e.target.reset();
statusEl.textContent = "Publicado ‚úîÔ∏è";
}catch(err){
console.error(err);
statusEl.textContent = "Error: " + err.message;
}finally{
setTimeout(()=>statusEl.textContent="",1200);
btn.disabled = false;
}
});

/***************** Minijuego: Gomoso Equilibrado ******************/
const cvs = document.getElementById("arena"), ctx = cvs.getContext("2d");
const lvlEl = document.getElementById("lvl"), scoreEl = document.getElementById("score"), sizeEl = document.getElementById("sizeRead");

let level = 1, score = 0;
let hand = { x: 400, y: 240, vx: 0, vy: 0 };
let gomoso; // personaje
let items = []; // comida que cae
let zone = { min: 24, max: 48 }; // radio saludable
const G = 0.25, FRICTION = 0.992, PUSH = 1.1, ACCEL = 1.7;

function rand(a,b){ return Math.random()*(b-a)+a; }

function resetLevel() {
items = [];
for (let i = 0; i < 6 + level * 2; i++) spawnItem();
zone.min = Math.max(20, 24 - level * 0.8);
zone.max = Math.min(64, 48 + level * 0.6);
}

function spawnItem(){
const type = Math.random() < 0.5 ? "burger" : "apple";
items.push({ type, x: rand(40, cvs.width-40), y: rand(-200, -40), vy: rand(1.0, 2.2) });
}

function startGame() {
level = 1; score = 0;
hand = { x: cvs.width/2, y: 200, vx: 0, vy: 0 };
gomoso = { x: cvs.width/2, y: cvs.height-60, vx: 0, vy: 0, r: 36, asleep: false, tired: false };
resetLevel();
lvlEl.textContent = level; scoreEl.textContent = score;
healthyTicks = 0;
loop();
}

function drawArena(){
ctx.fillStyle = "#0f0f12"; ctx.fillRect(0,0,cvs.width,cvs.height);
ctx.fillStyle = "#2b2b2e"; ctx.fillRect(0, cvs.height-20, cvs.width, 20);
ctx.strokeStyle = "rgba(76, 175, 80, 0.55)";
ctx.setLineDash([6,6]);
ctx.beginPath(); ctx.arc(gomoso.x, gomoso.y, zone.min, 0, Math.PI*2); ctx.stroke();
ctx.beginPath(); ctx.arc(gomoso.x, gomoso.y, zone.max, 0, Math.PI*2); ctx.stroke();
ctx.setLineDash([]);
}

function drawHand(){
ctx.font = "26px serif"; ctx.textAlign="center"; ctx.textBaseline="middle";
ctx.fillText("üëã", hand.x, hand.y);
}

function drawGomoso(){
const face = gomoso.asleep ? "üò¥" : gomoso.tired ? "ü•±" : "üòÄ";
ctx.font = Math.round(gomoso.r*1.5) + "px serif";
ctx.textAlign="center"; ctx.textBaseline="middle";
ctx.fillText(face, gomoso.x, gomoso.y);
}

function drawItems(){
ctx.font = "22px serif"; ctx.textAlign="center"; ctx.textBaseline="middle";
items.forEach(it=> ctx.fillText(it.type==="burger" ? "üçî" : "üçé", it.x, it.y));
}

function physics(){
// mano
hand.vx *= 0.92; hand.vy *= 0.92;
hand.x += hand.vx; hand.y += hand.vy;
hand.x = Math.max(20, Math.min(cvs.width-20, hand.x));
hand.y = Math.max(20, Math.min(cvs.height-40, hand.y));

// gomoso
gomoso.vy += G; gomoso.x += gomoso.vx; gomoso.y += gomoso.vy;
gomoso.vx *= FRICTION; gomoso.vy *= FRICTION;
if(gomoso.x < 20){ gomoso.x = 20; gomoso.vx *= -0.5; }
if(gomoso.x > cvs.width-20){ gomoso.x = cvs.width-20; gomoso.vx *= -0.5; }
if(gomoso.y > cvs.height-30){ gomoso.y = cvs.height-30; gomoso.vy *= -0.35; }

// empuje de la mano
const dx = gomoso.x - hand.x, dy = gomoso.y - hand.y, d = Math.hypot(dx,dy);
if(d < gomoso.r*0.9){ const nx = dx/(d||1), ny = dy/(d||1); gomoso.vx += nx * 1.1; gomoso.vy += ny * 1.1; }

// ca√≠da de items + colisi√≥n
items.forEach(it=>{
it.y += it.vy;
const ddx = gomoso.x - it.x, ddy = gomoso.y - it.y, dist = Math.hypot(ddx,ddy);
if(dist < gomoso.r*0.9){
if(it.type==="burger"){ gomoso.r = Math.min(72, gomoso.r + 2.2); score += 5; }
else { gomoso.r = Math.max(16, gomoso.r - 2.0); score += 5; }
it.y = cvs.height + 100;
scoreEl.textContent = score;
}
});
items = items.filter(it=>{ if(it.y > cvs.height + 40){ spawnItem(); return false; } return true; });

// estados
gomoso.asleep = gomoso.r > zone.max + 6;
gomoso.tired = gomoso.r < zone.min - 6;

// l√≠mites extremos ‚Üí retroceso de nivel
if(gomoso.r >= 80 || gomoso.r <= 14){
if(level > 1) level--;
gomoso.r = 36;
resetLevel();
lvlEl.textContent = level;
healthyTicks = 0;
}

// progreso de nivel si se mantiene en zona saludable
sizeEl.textContent = Math.round(gomoso.r) + "px";
if(gomoso.r >= zone.min && gomoso.r <= zone.max){
healthyTicks++;
if(healthyTicks > 60*5){ // ~5s
level++; lvlEl.textContent = level;
healthyTicks = 0;
resetLevel();
}
} else {
healthyTicks = Math.max(0, healthyTicks - 2);
}
}

function render(){
drawArena(); drawItems(); drawGomoso(); drawHand();
}

let healthyTicks = 0;
function loop(){ physics(); render(); requestAnimationFrame(loop); }

// Controles
window.addEventListener("keydown", (e)=>{
const k = e.key.toLowerCase();
if(["arrowleft","a"].includes(k)) hand.vx -= 1.7;
if(["arrowright","d"].includes(k)) hand.vx += 1.7;
if(["arrowup","w"].includes(k)) hand.vy -= 1.7;
if(["arrowdown","s"].includes(k)) hand.vy += 1.7;
});

document.getElementById("restart").addEventListener("click", startGame);
startGame();
</script>
</body>
</html>


