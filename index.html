<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>PersonAPP</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
:root{
--bg:#2b2ee6; --text:#f4f6f8; --panel:#202225; --panel2:#151618; --accent:#4CAF50; --muted:#b9c0c7;
--warn:#ffd166;
}
*{box-sizing:border-box}
body{margin:0; background:var(--bg); color:var(--text); font-family:'Montserrat','Segoe UI',Arial,sans-serif}
a{color:inherit}

.wrap{max-width:1200px; margin:0 auto; padding:20px}

header{display:flex; align-items:center; justify-content:center; text-align:center; padding:40px 10px 10px}
h1{font-size:2.6rem; margin:0 0 8px; text-shadow:0 2px 16px rgba(18,255,65,.7)}
p.lead{margin:0; opacity:.9}

/* Grilla de Apps */
.grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:22px; margin:32px 0 48px}
.card{
background:linear-gradient(135deg,var(--panel2) 60%,var(--panel) 100%);
border:1px solid rgba(255,255,255,.06);
border-radius:16px; padding:18px; box-shadow:0 2px 16px rgba(0,0,0,.25);
transition:transform .2s ease, box-shadow .2s ease;
}
.card:hover{transform:translateY(-6px); box-shadow:0 10px 24px rgba(0,0,0,.35)}
.card img.logo{width:64px; height:64px; object-fit:contain; background:#111; border-radius:12px; box-shadow:0 1px 8px rgba(0,0,0,.3)}
.card h3{margin:12px 0 8px; font-size:1.15rem}
.card p{margin:0 0 12px; color:#dfe5ea}
.stores{display:flex; gap:8px; flex-wrap:wrap}
.btn{
display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:none; cursor:pointer;
background:linear-gradient(90deg,#232526 0%, var(--accent) 100%); color:#fff; text-decoration:none; font-weight:700; font-size:.9rem;
}

/* Foro & Rese√±as */
section#foro{background:rgba(0,0,0,.16); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px; margin:24px 0 80px}
section#foro h2{margin:0 0 6px}
.hint{color:var(--muted); margin:0 0 16px}
form#postForm{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:16px}
form#postForm .full{grid-column:1/-1}
input, select, textarea{
width:100%; border:1px solid rgba(255,255,255,.15); background:#141516; color:#fff;
border-radius:10px; padding:10px 12px; font-family:inherit; font-size:1rem
}
textarea{min-height:100px; resize:vertical}
.actions{display:flex; gap:10px; align-items:center}
.secondary{background:#2a2d31}
.danger{background:#a33}
.upload-hint{font-size:.9rem; color:var(--muted)}
.preview{display:flex; gap:12px; flex-wrap:wrap}
.preview img{max-width:120px; border-radius:10px; border:1px solid rgba(255,255,255,.1)}

.feed{display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:14px}
.post{
background:linear-gradient(135deg,#1a1a1a 60%, #232323 100%); border:1px solid rgba(255,255,255,.08);
border-radius:12px; padding:14px; box-shadow:0 1px 10px rgba(0,0,0,.25)
}
.meta{font-size:.85rem; color:#c7ced6}
.stars{color:var(--warn)}
.post img{width:100%; height:auto; border-radius:10px; margin-top:8px}

/* Juego */
section#juego{margin:50px 0 90px; background:rgba(0,0,0,.14); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:20px}
#gameWrap{display:flex; flex-direction:column; align-items:center; gap:8px}
canvas#maze{background:#0f0f12; border:2px solid #2b2b2b; border-radius:8px; max-width:100%; height:auto}
.hud{display:flex; gap:14px; flex-wrap:wrap; align-items:center; justify-content:center}
.kbd{background:#111; border:1px solid #333; border-radius:6px; padding:2px 6px; font-family:ui-monospace, SFMono-Regular, Menlo, monospace}
.pad{display:grid; grid-template-columns:40px 40px 40px; gap:6px; margin-top:6px}
.pad button{height:40px; border-radius:8px; border:1px solid #2f2f2f; background:#1b1c1f; color:#fff; font-weight:700; cursor:pointer}
.pad button:active{transform:scale(.98)}

/* Fijos */
.brand{position:fixed; left:16px; bottom:16px; font-weight:800; letter-spacing:1px; opacity:.9}
.contact{position:fixed; right:16px; bottom:16px; opacity:.9; background:rgba(0,0,0,.3); padding:6px 12px; border-radius:8px}

/* Emoji que saluda */
.emoji-wave{
position:fixed; bottom:40px; right:40px; font-size:90px; line-height:1; z-index:9999;
animation:wave 1.6s ease-in-out infinite; user-select:none; pointer-events:none; filter:drop-shadow(0 3px 6px rgba(0,0,0,.5));
}
@keyframes wave{
0%,100%{transform:rotate(0deg)} 15%{transform:rotate(20deg)} 30%{transform:rotate(-10deg)}
45%{transform:rotate(12deg)} 60%{transform:rotate(-6deg)} 75%{transform:rotate(4deg)}
}
</style>
</head>
<body>
<div class="wrap">
<header>
<div>
<h1>APP para emprendedores</h1>
<p class="lead">Recursos √∫tiles, foro de rese√±as con im√°genes y un minijuego para cerrar üòÑ</p>
</div>
</header>

<!-- Grilla de Apps -->
<section id="apps" class="grid">
<article class="card">
<img class="logo" src="Img/logo.busho.png" alt="BUSHO" />
<h3>BUSHO</h3>
<p>Arriendo flexible de espacios comerciales. ‚ÄúAirbnb para tiendas‚Äù.</p>
<div class="stores">
<a class="btn" target="_blank" href="https://busho.cl/">Visitar</a>
<a class="btn" target="_blank" href="https://apps.apple.com/cl/app/busho/id1665748711">iOS</a>
<a class="btn" target="_blank" href="https://play.google.com/store/apps/details?id=app.busho.cl">Android</a>
</div>
</article>

<article class="card">
<img class="logo" src="Img/logo.canva.png" alt="Canva" />
<h3>Canva</h3>
<p>Dise√±os f√°ciles para redes, logos, flyers y m√°s.</p>
<div class="stores"><a class="btn" target="_blank" href="https://www.canva.com/">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.shopify3.png" alt="Shopify" />
<h3>Shopify</h3>
<p>Monta tu tienda online en minutos.</p>
<div class="stores"><a class="btn" target="_blank" href="https://www.shopify.com/">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.zoom.png" alt="Zoom" />
<h3>Zoom</h3>
<p>Reuniones con clientes y partners.</p>
<div class="stores"><a class="btn" target="_blank" href="https://zoom.us/">Visitar</a></div>
</article>

<article class="card">
<img class="logo" src="Img/logo.mercadopago.png" alt="Mercado Pago" />
<h3>Mercado Pago</h3>
<p>Cobra con tarjeta desde el celular.</p>
<div class="stores"><a class="btn" target="_blank" href="https://www.mercadopago.cl/">Visitar</a></div>
</article>
</section>

<!-- Foro & Rese√±as (global, con im√°genes) -->
<section id="foro">
<h2>Foro & Rese√±as</h2>
<p class="hint">Comparte tu experiencia. Todas las rese√±as quedan p√∫blicas. (Las im√°genes se suben a la nube)</p>

<form id="postForm">
<div>
<label>App</label>
<select id="fApp" required>
<option value="BUSHO">BUSHO</option>
<option value="Canva">Canva</option>
<option value="Shopify">Shopify</option>
<option value="Zoom">Zoom</option>
<option value="Mercado Pago">Mercado Pago</option>
</select>
</div>

<div>
<label>Tu nombre</label>
<input id="fName" type="text" placeholder="Ej: Ra√∫l" required />
</div>

<div>
<label>Calificaci√≥n</label>
<select id="fRating" required>
<option value="5">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5)</option>
<option value="4">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (4)</option>
<option value="3">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (3)</option>
<option value="2">‚òÖ‚òÖ‚òÜ‚òÜ‚òÜ (2)</option>
<option value="1">‚òÖ‚òÜ‚òÜ‚òÜ‚òÜ (1)</option>
</select>
</div>

<div class="full">
<label>Rese√±a</label>
<textarea id="fText" placeholder="¬øQu√© te gust√≥? ¬øQu√© mejorar√≠as?" required></textarea>
</div>

<div class="full">
<label>Imagen (opcional)</label>
<input id="fImage" type="file" accept="image/*" />
<div class="upload-hint">Formatos comunes (JPG/PNG). Tama√±o sugerido &lt; 3 MB.</div>
<div id="preview" class="preview"></div>
</div>

<div class="full actions">
<button class="btn" type="submit" id="sendBtn">Publicar</button>
<button class="btn secondary" type="button" id="clearLocal">Limpiar cach√© local</button>
<span id="status" class="hint"></span>
</div>
</form>

<div id="feed" class="feed"></div>
</section>

<!-- Juego del Laberinto -->
<section id="juego">
<h2>Minijuego: lleva la üëã a la meta</h2>
<p class="hint">Controles: <span class="kbd">‚Üê</span> <span class="kbd">‚Üí</span> <span class="kbd">‚Üë</span> <span class="kbd">‚Üì</span> o WASD. En m√≥vil: usa el pad.</p>
<div id="gameWrap">
<canvas id="maze" width="640" height="480"></canvas>
<div class="hud">
<button class="btn" id="restart">Reiniciar</button>
<div>Nivel: <strong id="lvl">1</strong></div>
</div>
<div class="pad">
<div></div><button data-dy="-1">‚Üë</button><div></div>
<button data-dx="-1">‚Üê</button><button data-dx="1">‚Üí</button>
<div></div><button data-dy="1">‚Üì</button><div></div>
</div>
</div>
</section>
</div>

<div class="brand">PersonAPP</div>
<div class="contact">contacto: personappoficial@gmail.com</div>
<div class="emoji-wave" aria-hidden="true">üëã</div>

<!-- Firebase (FORO GLOBAL) -->
<!-- 1) A√±ade tus librer√≠as Firebase: -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
<!-- 2) Configura tu proyecto (REEMPLAZA con tus claves de Firebase): -->
<script>
// ‚ö†Ô∏è Rellena con los valores de tu proyecto Firebase
const firebaseConfig = {
apiKey: "TU_API_KEY",
authDomain: "TU_AUTH_DOMAIN",
projectId: "TU_PROJECT_ID",
storageBucket: "TU_STORAGE_BUCKET",
messagingSenderId: "TU_SENDER_ID",
appId: "TU_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();
</script>

<!-- Foro & Rese√±as (Firestore + Storage) + Juego -->
<script>
// ===== Utilidades =====
const $ = sel => document.querySelector(sel);
const $$ = sel => document.querySelectorAll(sel);
const feed = $("#feed");
const statusEl = $("#status");
const preview = $("#preview");
const escapeHTML = (str) => (str || "").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
const stars = n => "‚òÖ".repeat(+n||0) + "‚òÜ".repeat(5-(+n||0));

// ===== Previsualizar imagen =====
$("#fImage").addEventListener("change", e=>{
preview.innerHTML = "";
const file = e.target.files?.[0];
if(!file) return;
const url = URL.createObjectURL(file);
const img = new Image();
img.src = url; img.onload = ()=> URL.revokeObjectURL(url);
preview.appendChild(img);
});

// ===== Publicar post =====
$("#postForm").addEventListener("submit", async (e)=>{
e.preventDefault();
statusEl.textContent = "Publicando...";
$("#sendBtn").disabled = true;

try{
const app = $("#fApp").value;
const name = $("#fName").value.trim();
const rating = $("#fRating").value;
const text = $("#fText").value.trim();
const file = $("#fImage").files?.[0] || null;

if(!name || !text) throw new Error("Completa nombre y rese√±a.");

let imageUrl = "";
if(file){
const safeName = file.name.replace(/[^a-z0-9.\-_]/gi,"_");
const path = `images/${Date.now()}_${safeName}`;
const ref = storage.ref().child(path);
await ref.put(file);
imageUrl = await ref.getDownloadURL();
}

await db.collection("posts").add({
app, name, rating: +rating, text, imageUrl, time: Date.now()
});

$("#postForm").reset();
preview.innerHTML = "";
statusEl.textContent = "Publicado ‚úîÔ∏è";
setTimeout(()=> statusEl.textContent = "", 1400);
}catch(err){
console.error(err);
statusEl.textContent = "Error: " + err.message;
}finally{
$("#sendBtn").disabled = false;
}
});

// ===== Listener en tiempo real =====
db.collection("posts").orderBy("time","desc").onSnapshot(snap=>{
const frag = document.createDocumentFragment();
snap.forEach(doc=>{
const p = doc.data();
const card = document.createElement("article");
card.className = "post";
card.innerHTML = `
<div class="meta"><strong>${escapeHTML(p.app)}</strong> ¬∑ ${escapeHTML(p.name)}
<span class="stars">${stars(p.rating)}</span>
</div>
<div>${escapeHTML(p.text)}</div>
${p.imageUrl ? `<img src="${escapeHTML(p.imageUrl)}" alt="imagen">` : ""}
<div class="meta">${new Date(p.time||0).toLocaleString()}</div>
`;
frag.appendChild(card);
});
feed.innerHTML = "";
feed.appendChild(frag);
});

// Limpia cach√© local (no afecta Firestore; es √∫til por si el navegador guarda algo viejo)
$("#clearLocal").addEventListener("click", ()=>{
localStorage.clear();
statusEl.textContent = "Cach√© local limpiado.";
setTimeout(()=> statusEl.textContent = "", 1200);
});

// ====== JUEGO: Laberinto con niveles ======
const cvs = document.getElementById("maze");
const ctx = cvs.getContext("2d");
const lvlEl = document.getElementById("lvl");
let level = 1, gridW=15, gridH=11, cell=32;
let maze, player, goal;

function generateMaze(w,h){
// dimensiones impares
w = w%2===0 ? w+1 : w; h = h%2===0 ? h+1 : h;
const M = Array.from({length:h}, ()=> Array(w).fill(1));
const stack = [{x:1,y:1}];
M[1][1]=0;
const dirs = [{dx:2,dy:0},{dx:-2,dy:0},{dx:0,dy:2},{dx:0,dy:-2}];
while(stack.length){
const cur = stack[stack.length-1];
const order = dirs.slice().sort(()=>Math.random()-0.5);
let carved = false;
for(const d of order){
const nx = cur.x + d.dx, ny = cur.y + d.dy;
if(nx>0 && nx<w-1 && ny>0 && ny<h-1 && M[ny][nx]===1){
M[ny][nx]=0;
M[cur.y + d.dy/2 | 0][cur.x + d.dx/2 | 0]=0;
stack.push({x:nx,y:ny});
carved = true; break;
}
}
if(!carved) stack.pop();
}
M[h-2][w-2]=0;
return M;
}

function fitCanvas(){
// Ajusta cell para que el canvas quepa en pantallas peque√±as
const maxW = Math.min(640, window.innerWidth - 40);
const maxH = 420;
cell = Math.floor(Math.min(maxW / gridW, maxH / gridH));
cvs.width = gridW * cell;
cvs.height = gridH * cell;
}

function resetLevel(){
fitCanvas();
maze = generateMaze(gridW, gridH);
player = {x:1, y:1};
goal = {x:gridW-2, y:gridH-2};
draw();
}

function draw(){
ctx.fillStyle = "#0f0f12";
ctx.fillRect(0,0,cvs.width,cvs.height);

// muros
ctx.fillStyle = "#2b2b2e";
for(let y=0;y<gridH;y++){
for(let x=0;x<gridW;x++){
if(maze[y][x]===1) ctx.fillRect(x*cell, y*cell, cell, cell);
}
}

// meta
ctx.fillStyle = "#ffcc00";
ctx.beginPath();
ctx.arc((goal.x+0.5)*cell, (goal.y+0.5)*cell, cell*0.28, 0, Math.PI*2);
ctx.fill();

// jugador (emoji)
ctx.font = Math.floor(cell*0.8) + "px serif";
ctx.textAlign = "center";
ctx.textBaseline = "middle";
ctx.fillText("üëã", (player.x+0.5)*cell, (player.y+0.5)*cell);
}

function tryMove(dx,dy){
const nx = player.x + dx, ny = player.y + dy;
if(nx<0 || ny<0 || nx>=gridW || ny>=gridH) return;
if(maze[ny][nx]===0){
player.x = nx; player.y = ny; draw();
if(player.x===goal.x && player.y===goal.y){
// siguiente nivel
level++;
lvlEl.textContent = level;
// Incrementa dificultad
gridW = Math.min(35, gridW + 4);
gridH = Math.min(27, gridH + 2);
resetLevel();
}
}
}

window.addEventListener("keydown", (e)=>{
const k = e.key.toLowerCase();
if(["arrowleft","a"].includes(k)) { tryMove(-1,0); e.preventDefault(); }
if(["arrowright","d"].includes(k)) { tryMove(1,0); e.preventDefault(); }
if(["arrowup","w"].includes(k)) { tryMove(0,-1); e.preventDefault(); }
if(["arrowdown","s"].includes(k)) { tryMove(0,1); e.preventDefault(); }
});

// Pad t√°ctil
$$(".pad button").forEach(b=>{
b.addEventListener("click", ()=>{
const dx = +b.getAttribute("data-dx")||0;
const dy = +b.getAttribute("data-dy")||0;
tryMove(dx,dy);
});
});

// Bot√≥n reiniciar
document.getElementById("restart").addEventListener("click", ()=>{
level = 1; gridW = 15; gridH = 11; lvlEl.textContent = level; resetLevel();
});

window.addEventListener("resize", resetLevel);
// Inicio
resetLevel();
</script>
</body>
</html>

